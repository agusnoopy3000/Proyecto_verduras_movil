# ğŸ¯ Huerto Hogar - Diagramas de PresentaciÃ³n

## ğŸ“Š Diagrama de Arquitectura (Simplificado)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                    HUERTO HOGAR                                        â•‘
â•‘                              Arquitectura del Sistema                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                                      ğŸ‘¤ USUARIO
                                          â”‚
                                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚          ğŸ“± APP ANDROID                  â”‚
                    â”‚                                          â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚            UI LAYER               â”‚  â”‚
                    â”‚   â”‚   Jetpack Compose + Material 3   â”‚  â”‚
                    â”‚   â”‚                                   â”‚  â”‚
                    â”‚   â”‚  ğŸ  Home  ğŸ›’ Cart  ğŸ“¦ Orders  ğŸ‘¤  â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                  â”‚                       â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚         VIEWMODEL LAYER          â”‚  â”‚
                    â”‚   â”‚     StateFlow + Coroutines       â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                  â”‚                      â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚        REPOSITORY LAYER          â”‚  â”‚
                    â”‚   â”‚   Decide: Local vs Remoto        â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚           â”‚               â”‚             â”‚
                    â”‚     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”‚
                    â”‚     â”‚   ROOM    â”‚   â”‚ RETROFIT  â”‚       â”‚
                    â”‚     â”‚  SQLite   â”‚   â”‚   HTTP    â”‚       â”‚
                    â”‚     â”‚  (Local)  â”‚   â”‚ (Remoto)  â”‚       â”‚
                    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
                    â”‚                           â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                      INTERNET  â”‚
                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                                â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                                    â”‚                                     â”‚
           â–¼                                    â–¼                                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ”¥ FIREBASE  â”‚                 â”‚  â˜ï¸ AWS EC2       â”‚                 â”‚  ğŸŒ¤ï¸ WEATHER   â”‚
    â”‚              â”‚                 â”‚                  â”‚                 â”‚     API      â”‚
    â”‚  Auth +      â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚  Spring Boot     â”‚                 â”‚              â”‚
    â”‚  Google      â”‚    ValidaciÃ³n   â”‚  Backend         â”‚                 â”‚  OpenWeather â”‚
    â”‚  Sign-In     â”‚    de tokens    â”‚                  â”‚                 â”‚  Map         â”‚
    â”‚              â”‚                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚ PostgreSQL â”‚  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚  â”‚    /MySQL  â”‚  â”‚
                                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                     â”‚                  â”‚
                                     â”‚  IP: 52.2.172.54 â”‚
                                     â”‚  Puerto: 8080    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Flujo de AutenticaciÃ³n (VersiÃ³n Simple)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           FLUJO DE AUTENTICACIÃ“N HÃBRIDA                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    OPCIÃ“N A: LOGIN CON GOOGLE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        ğŸ“± App                ğŸ”¥ Firebase              ğŸƒ Backend
           â”‚                      â”‚                        â”‚
           â”‚â”€â”€â”€â”€ 1. Google â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
           â”‚     Sign-In          â”‚                        â”‚
           â”‚                      â”‚                        â”‚
           â”‚â—„â”€â”€â”€ 2. Firebase â”€â”€â”€â”€â”€â”‚                        â”‚
           â”‚     ID Token         â”‚                        â”‚
           â”‚                      â”‚                        â”‚
           â”‚â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 3. firebase-sync â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚
           â”‚                      â”‚                        â”‚
           â”‚                      â”‚â—„â”€â”€â”€ 4. Verificar â”€â”€â”€â”€â”€â”€â”‚
           â”‚                      â”‚     token              â”‚
           â”‚                      â”‚                        â”‚
           â”‚â—„â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 5. JWT Backend â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
           â”‚                      â”‚                        â”‚
        âœ… Guardar JWT            â”‚                        â”‚
           en TokenManager        â”‚                        â”‚


    OPCIÃ“N B: LOGIN DIRECTO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        ğŸ“± App                                        ğŸƒ Backend
           â”‚                                              â”‚
           â”‚â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• email + password â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚
           â”‚                                              â”‚
           â”‚                                    Validar enâ”‚
           â”‚                                    Base Datosâ”‚
           â”‚                                              â”‚
           â”‚â—„â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• JWT Backend â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
           â”‚                                              â”‚
        âœ… Guardar JWT                                    â”‚
           en TokenManager                                â”‚


    USO DE LA API (Ya autenticado)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        ğŸ“± App                                        ğŸƒ Backend
           â”‚                                              â”‚
           â”‚â•â•â•â• GET /products â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚
           â”‚     Header: Authorization: Bearer <JWT>      â”‚
           â”‚                                              â”‚
           â”‚                                    Verificar â”‚
           â”‚                                    JWT vÃ¡lidoâ”‚
           â”‚                                              â”‚
           â”‚â—„â•â•â•â• 200 OK + Datos â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
           â”‚                                              â”‚
```

---

## ğŸš€ Diagrama de Despliegue (VersiÃ³n Simple)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              DIAGRAMA DE DESPLIEGUE                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


         DISPOSITIVOS                      NUBE                        SERVICIOS EXTERNOS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ ğŸ“± Smartphone    â”‚
     â”‚    Android      â”‚
     â”‚                 â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  APK firmado    â”‚          â”‚    â˜ï¸ AWS EC2         â”‚
     â”‚  Min SDK: 24    â”‚          â”‚                      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
              â”‚                   â”‚  â”‚  Spring Boot   â”‚  â”‚
              â”‚                   â”‚  â”‚    Backend     â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚                â”‚  â”‚          â”‚  ğŸ”¥ Firebase     â”‚
     â”‚ ğŸ“± Tablet        â”‚   HTTP   â”‚  â”‚  Java 17      â”‚  â”‚   HTTPS  â”‚                 â”‚
     â”‚    Android      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”‚  REST API     â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Authentication â”‚
     â”‚                 â”‚  :8080   â”‚  â”‚                â”‚  â”‚          â”‚  Google Sign-In â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚                 â”‚
              â”‚                   â”‚          â”‚           â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚          â”‚           â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
     â”‚ ğŸ’» Emulador      â”‚          â”‚  â”‚   PostgreSQL   â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Android Studio â”‚          â”‚  â”‚    / MySQL     â”‚  â”‚          â”‚  ğŸŒ¤ï¸ OpenWeather  â”‚
     â”‚                 â”‚          â”‚  â”‚   Database     â”‚  â”‚   HTTPS  â”‚                 â”‚
     â”‚  API Level 34   â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Weather API    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                      â”‚          â”‚                 â”‚
                                  â”‚  IP: 52.2.172.54     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚  Elastic IP          â”‚
                                  â”‚                      â”‚
                                  â”‚  Security Group:     â”‚
                                  â”‚  â€¢ 22  (SSH)         â”‚
                                  â”‚  â€¢ 8080 (API)        â”‚
                                  â”‚  â€¢ 80/443 (HTTP/S)   â”‚
                                  â”‚                      â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Estructura de Capas MVVM

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            ARQUITECTURA MVVM                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                   VIEW                                           â”‚
    â”‚                          (Composables / Screens)                                 â”‚
    â”‚                                                                                  â”‚
    â”‚   CatalogScreen.kt â”‚ CartScreen.kt â”‚ ProfileScreen.kt â”‚ LoginScreen.kt          â”‚
    â”‚                                                                                  â”‚
    â”‚   â€¢ Solo renderiza UI                                                            â”‚
    â”‚   â€¢ Observa estado con collectAsState()                                          â”‚
    â”‚   â€¢ Llama funciones del ViewModel                                                â”‚
    â”‚                                                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ observa StateFlow
                                          â”‚ llama funciones
                                          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                VIEWMODEL                                         â”‚
    â”‚                                                                                  â”‚
    â”‚   CatalogViewModel â”‚ CartViewModel â”‚ AuthViewModel â”‚ PedidoViewModel            â”‚
    â”‚                                                                                  â”‚
    â”‚   â€¢ Mantiene el estado (StateFlow)                                               â”‚
    â”‚   â€¢ LÃ³gica de presentaciÃ³n                                                       â”‚
    â”‚   â€¢ Lifecycle-aware (sobrevive rotaciones)                                       â”‚
    â”‚   â€¢ Usa Coroutines para async                                                    â”‚
    â”‚                                                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ usa Repository
                                          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                               REPOSITORY                                         â”‚
    â”‚                                                                                  â”‚
    â”‚   ProductoRepository â”‚ PedidoRepository â”‚ UserRepository                        â”‚
    â”‚                                                                                  â”‚
    â”‚   â€¢ Abstrae origen de datos                                                      â”‚
    â”‚   â€¢ Decide: Â¿Local o Remoto?                                                     â”‚
    â”‚   â€¢ Transforma datos (API â†’ Local)                                               â”‚
    â”‚   â€¢ Maneja cachÃ©                                                                 â”‚
    â”‚                                                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                                     â”‚
                        â–¼                                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          LOCAL DATA               â”‚   â”‚           REMOTE DATA                  â”‚
    â”‚                                   â”‚   â”‚                                        â”‚
    â”‚   Room Database                   â”‚   â”‚   Retrofit + OkHttp                   â”‚
    â”‚   â€¢ UserDao                       â”‚   â”‚   â€¢ ApiService (Backend)              â”‚
    â”‚   â€¢ ProductoDao                   â”‚   â”‚   â€¢ WeatherApiService (Externa)       â”‚
    â”‚   â€¢ PedidoDao                     â”‚   â”‚                                        â”‚
    â”‚                                   â”‚   â”‚   TokenManager                        â”‚
    â”‚   SharedPreferences               â”‚   â”‚   â€¢ JWT storage                       â”‚
    â”‚   â€¢ TokenManager                  â”‚   â”‚   â€¢ Session data                      â”‚
    â”‚                                   â”‚   â”‚                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Modelo de Datos (ERD Simplificado)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           MODELO ENTIDAD-RELACIÃ“N                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      USUARIOS        â”‚                    â”‚      PRODUCTOS       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ ğŸ”‘ id                â”‚                    â”‚ ğŸ”‘ id                â”‚
    â”‚    email             â”‚                    â”‚    codigo            â”‚
    â”‚    password (hash)   â”‚                    â”‚    nombre            â”‚
    â”‚    nombre            â”‚                    â”‚    descripcion       â”‚
    â”‚    apellido          â”‚                    â”‚    precio            â”‚
    â”‚    run               â”‚                    â”‚    stock             â”‚
    â”‚    direccion         â”‚                    â”‚    imagen            â”‚
    â”‚    telefono          â”‚                    â”‚    categoria         â”‚
    â”‚    rol               â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚    firebase_uid      â”‚                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
               â”‚                                           â”‚
               â”‚ 1:N                                       â”‚ 1:N
               â”‚                                           â”‚
               â–¼                                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
    â”‚       PEDIDOS        â”‚                               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
    â”‚ ğŸ”‘ id                â”‚                               â”‚
    â”‚ ğŸ”— usuario_id â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
    â”‚    estado            â”‚                               â”‚
    â”‚    total             â”‚                               â”‚
    â”‚    direccion_envio   â”‚                               â”‚
    â”‚    metodo_pago       â”‚                               â”‚
    â”‚    notas             â”‚                               â”‚
    â”‚    created_at        â”‚                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
               â”‚                                           â”‚
               â”‚ 1:N                                       â”‚
               â”‚                                           â”‚
               â–¼                                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
    â”‚   DETALLE_PEDIDOS    â”‚                               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
    â”‚ ğŸ”‘ id                â”‚                               â”‚
    â”‚ ğŸ”— pedido_id â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
    â”‚ ğŸ”— producto_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚    cantidad          â”‚
    â”‚    precio_unitario   â”‚
    â”‚    subtotal          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



    ENUMS:
    â•â•â•â•â•â•

    rol:                    estado:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ADMIN       â”‚        â”‚ PENDIENTE   â”‚ â”€â”€â–º ReciÃ©n creado
    â”‚ CLIENTE     â”‚        â”‚ CONFIRMADO  â”‚ â”€â”€â–º En preparaciÃ³n
    â”‚ VENDEDOR    â”‚        â”‚ EN_CAMINO   â”‚ â”€â”€â–º En delivery
    â”‚ REPARTIDOR  â”‚        â”‚ ENTREGADO   â”‚ â”€â”€â–º Completado
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ CANCELADO   â”‚ â”€â”€â–º Anulado
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Resumen de Endpoints

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              API REST - ENDPOINTS                                      â•‘
â•‘                          http://52.2.172.54:8080/api/v1/                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ğŸ” AUTENTICACIÃ“N                              ğŸ“¦ PRODUCTOS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    POST /auth/register     â†’ Crear cuenta        GET /products         â†’ Listar todos
    POST /auth/login        â†’ Iniciar sesiÃ³n      GET /products?q=x     â†’ Buscar
    POST /auth/firebase-sync â†’ Auth hÃ­brida       GET /products/{id}    â†’ Por ID
                                                  GET /products/codigo/x â†’ Por cÃ³digo QR


    ğŸ›’ PEDIDOS                                    ğŸ‘¤ USUARIOS
    â•â•â•â•â•â•â•â•â•â•â•                                   â•â•â•â•â•â•â•â•â•â•â•

    POST /orders            â†’ Crear pedido        GET /users/me         â†’ Mi perfil
    GET  /orders            â†’ Mis pedidos
    GET  /orders/{id}       â†’ Detalle pedido


    ğŸ“‹ HEADERS REQUERIDOS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    Content-Type: application/json
    Authorization: Bearer <JWT_TOKEN>    â† Requerido excepto login/register
```

---

## ğŸ“± Recursos Nativos

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              RECURSOS NATIVOS DEL DISPOSITIVO                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ“· CÃMARA (QR Scanner)                                                          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                                                                  â”‚
    â”‚  LibrerÃ­as:   CameraX + ML Kit Barcode Scanning                                 â”‚
    â”‚                                                                                  â”‚
    â”‚  Permiso:     android.permission.CAMERA                                          â”‚
    â”‚                                                                                  â”‚
    â”‚  Uso:         Escanear cÃ³digos QR de productos para agregarlos al carrito       â”‚
    â”‚                                                                                  â”‚
    â”‚  Flujo:       1. Usuario abre QR Scanner                                         â”‚
    â”‚               2. Solicita permiso de cÃ¡mara (si no lo tiene)                     â”‚
    â”‚               3. CameraX inicia preview                                          â”‚
    â”‚               4. ML Kit detecta cÃ³digo de barras                                  â”‚
    â”‚               5. Llama a /products/codigo/{codigo}                               â”‚
    â”‚               6. Muestra producto o error                                         â”‚
    â”‚                                                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ“ UBICACIÃ“N (GPS)                                                              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                                                                  â”‚
    â”‚  LibrerÃ­a:    Google Play Services Location                                      â”‚
    â”‚                                                                                  â”‚
    â”‚  Permisos:    android.permission.ACCESS_FINE_LOCATION                           â”‚
    â”‚               android.permission.ACCESS_COARSE_LOCATION                          â”‚
    â”‚                                                                                  â”‚
    â”‚  Uso:         1. Obtener clima local (OpenWeatherMap)                           â”‚
    â”‚               2. Calcular distancia para envÃ­o                                   â”‚
    â”‚                                                                                  â”‚
    â”‚  Flujo:       1. Solicita permisos de ubicaciÃ³n                                  â”‚
    â”‚               2. FusedLocationProvider obtiene coordenadas                       â”‚
    â”‚               3. EnvÃ­a lat/lon a OpenWeatherMap API                              â”‚
    â”‚               4. Muestra widget de clima en HomeScreen                           â”‚
    â”‚                                                                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*Diagramas para presentaciÃ³n - Huerto Hogar v1.0.0*
